<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>greenplum (docker安装) | 帅气的代码</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'true';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">greenplum (docker安装)</h1><a id="logo" href="/.">帅气的代码</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">greenplum (docker安装)</h1><div class="post-meta">May 8, 2018</div><div class="post-content"><h3 id="Greenplum是一个MPP（海量并行处理）计算框架的分布式数据库，其数据库引擎层是基于著名的Postgresql数据库，企业级数据库产品，现已开源。Greenplum拥有丰富的特性，包括："><a href="#Greenplum是一个MPP（海量并行处理）计算框架的分布式数据库，其数据库引擎层是基于著名的Postgresql数据库，企业级数据库产品，现已开源。Greenplum拥有丰富的特性，包括：" class="headerlink" title="Greenplum是一个MPP（海量并行处理）计算框架的分布式数据库，其数据库引擎层是基于著名的Postgresql数据库，企业级数据库产品，现已开源。Greenplum拥有丰富的特性，包括："></a>Greenplum是一个MPP（海量并行处理）计算框架的分布式数据库，其数据库引擎层是基于著名的Postgresql数据库，企业级数据库产品，现已开源。Greenplum拥有丰富的特性，包括：</h3><ol>
<li>完全支持ANSI SQL 2008标准和SQL OLAP 2003 扩展，支持ODBC和JDBC</li>
<li>支持分布式事务，支持ACID</li>
<li>支持行存储、列存储，以及可通过外部表的方式访问其它关系型数据库或者Hadoop</li>
<li>拥有良好的线性扩展能力，支持上千个节点</li>
</ol>
<h2 id="详情参考"><a href="#详情参考" class="headerlink" title="详情参考"></a>详情参考</h2><p><a href="https://my.oschina.net/u/876354/blog/1606419" target="_blank" rel="noopener"> <strong>docker中安装配置Greenplum集群</strong></a></p>
<h3 id="BUG-记录"><a href="#BUG-记录" class="headerlink" title="BUG 记录"></a>BUG 记录</h3><blockquote>
<p>Failed to complete obtain psql count Master gp_segment_configuration Script Exiti</p>
</blockquote>
<blockquote>
<p>问题： 在初始化过程中，如到以下问题：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpadmin-[FATAL]:-Failed <span class="keyword">to</span> complete obtain psql count Master gp_segment_configuration <span class="built_in"> Script </span>Exiting!</span><br><span class="line">Script has left Greenplum Database <span class="keyword">in</span> an incomplete state</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>解决方法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"RemoveIPC=no"</span> &gt;&gt; /etc/systemd/logind.conf</span><br><span class="line">/bin/systemctl restart systemd-logind.service</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="多节点docker集群-init-成功-gpstart-不成功"><a href="#多节点docker集群-init-成功-gpstart-不成功" class="headerlink" title="多节点docker集群 init 成功 gpstart 不成功"></a>多节点docker集群 init 成功 gpstart 不成功</h2><blockquote>
<p>问题 gpinit 成功 在gpstart的时候 超时（gp_segment_connect_timeout ），应该是在与segment通信的时候连接失败</p>
</blockquote>
<h2 id="宿主机安装-greenplum-集群"><a href="#宿主机安装-greenplum-集群" class="headerlink" title="宿主机安装 greenplum 集群"></a>宿主机安装 greenplum 集群</h2><blockquote>
<ol>
<li><strong>gpinit 成功了在 gpstart的时候出错</strong>  <code>gpstart error: Do not have enough valid segments to start the array</code> </li>
<li>关闭防火墙 centos74 关闭防火墙 发现连网失败 初始化的报错 <code>FATAL:  DTM initialization: failure during startup recovery, retry failed, check segment status (cdbtm.c:1513)</code> 好在服务启动成功（实际上还是失败，安慰）</li>
<li>再次打开防火墙 暴力打开 配置文件内配置的端口 20000以上的端口 （telnet 测试端口是后开放）</li>
<li>gpstart 启动成功 <code>Database successfully started</code> (激动)</li>
<li>装完以为完事，在插入查询的时候莫名的卡死，查询文档后得知 主从节点在通讯的时候是需要1024:65535 udp 通讯， 再次iptables 打开端口</li>
</ol>
</blockquote>
<h2 id="详细的文档-Greenplum数据库文档"><a href="#详细的文档-Greenplum数据库文档" class="headerlink" title="详细的文档  Greenplum数据库文档"></a>详细的文档 <a href="https://gp-docs-cn.github.io/docs/best_practices/intro.html" target="_blank" rel="noopener"> Greenplum数据库文档</a></h2></div><div class="tags"><a href="/tags/数据仓库-大数据-greenplum/">数据仓库 大数据 greenplum</a></div><div class="post-nav"><a class="pre" href="/2018/05/30/kafka/">kafka</a><a class="next" href="/2018/05/08/linux-record/">Linux 使用记录</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://yoursite.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/数据仓库-大数据-greenplum/" style="font-size: 15px;">数据仓库 大数据 greenplum</a> <a href="/tags/docker-ubuntu/" style="font-size: 15px;">docker ubuntu</a> <a href="/tags/echo-EOF/" style="font-size: 15px;">echo EOF</a> <a href="/tags/消息队列-greenplum/" style="font-size: 15px;">消息队列 greenplum</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/30/greenplum/">greenplum</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/30/kafka/">kafka</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/08/greenplum_docker/">greenplum (docker安装)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/08/linux-record/">Linux 使用记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/hexo_guid/">ubuntu 安裝配置 hexo</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/first/">平時小問題解決</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.durian.link" title="durian" target="_blank">durian</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">帅气的代码.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>