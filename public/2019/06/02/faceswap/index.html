<!DOCTYPE html>
<html lang="zh-CN">


<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    faceswap | ğŸ‘©â€ğŸ’»çš„æ—¥å¸¸
  </title>
  <meta name="description" content="æ—¥å¸¸çš„è‡ªæˆ‘æ€»ç»“">
  
  <meta name="keywords" content="
  æ¢è„¸ å›¾åƒ
  ">
  
  <meta name="author" content="shuai">

  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="theme-color" content="#1e2327">
  <link rel="apple-touch-icon" href="https://github.githubassets.com/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://github.githubassets.com/apple-touch-icon-180x180.png">

  <link rel="icon" type="image/x-icon" href="https://github.githubassets.com/favicon.ico">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  

  

  <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
</head>

<body id="replica-app">

<nav class="navbar-wrapper">
  <div class="navbar">
    <div class="container clearfix">
      <a href="/" class="navbar-logo"><i class="fa fa-github"></i></a>

      <div class="navbar-search float-left desktop-only">
        <div class="navbar-search-form">
          <label for="gsc-i-id1">This website</label>
          <div id="google-search">
            <gcse:search></gcse:search>
          </div>
        </div>
      </div>

      <ul class="navbar-nav float-left">
        
        <li><a href="/archives">Archives</a></li>
        
        
        <li><a href="/categories">Categories</a></li>
        
        
        <li><a href="/tags">Tags</a></li>
        
        
        <li class="desktop-only"><a href="/atom.xml" target="_blank">RSS</a></li>
        
      </ul>

      <ul class="navbar-nav user-nav float-right desktop-only">
        <li class="user-nav-notification">
          <a><span class="user-nav-unread"></span><i class="fa fa-bell"></i></a>
        </li>
        <li>
          <a><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></a>
        </li>
        <li class="user-nav-logo">
          <a><img src="https://octodex.github.com/images/baracktocat.jpg?v=4&amp;s=460"> <i class="fa fa-caret-down"></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="main-container">
  <header class="header-wrapper desktop-only">
  <div class="container header-site-detail">
    <ul class="header-toolbar">
      <li class="clearfix">
        <a href="/archives" class="header-toolbar-left"><i class="fa fa-file-text"></i> Posts </a>
        <a href="/archives" class="header-toolbar-right"> 12 </a>
      </li>
      <li>
        <a href="/tags" class="header-toolbar-left"><i class="fa fa-tags"></i> Tags </a>
        <a href="/tags" class="header-toolbar-right"> 11 </a>
      </li>
      <li>
        <a href="/categories" class="header-toolbar-left"><i class="fa fa-folder-open"></i> Categories </a>
        <a href="/categories" class="header-toolbar-right"> 7 </a>
      </li>
    </ul>
    <h2 class="header-title">
      <i class="fa fa-book text-muted"></i>
      <a href="/">ğŸ‘©â€ğŸ’»çš„æ—¥å¸¸</a>
      
      
    </h2>
  </div>

  <div class="container">
    <div class="header-tab-wrapper clearfix">
      <span class="header-tab header-tab-selected"><i class="fa fa-thumbs-o-up"></i> Like</span>
      <span class="header-tab"><i class="fa fa-share-alt"></i> Share</span>
      <span class="header-tab"><i class="fa fa-comments-o"></i> Discussion</span>
      <span class="header-tab"><i class="fa fa-bookmark-o"></i> Bookmark </span>
      <span class="header-tab"><i class="fa fa-smile-o"></i> Smile <i class="fa fa-caret-down"></i></span>
    </div>
  </div>
</header>


<div class="post-container container">
  <h3>
    <i class="fa fa-user-o"></i>
    shuai

    <span class="post-date float-right" title="{{moment(1559405494000).format('MMM DD, YYYY, h:mm:ss A')}}">
      <i class="fa fa-pencil-square-o"></i>
      {{moment(1559405494000).fromNow()}}
    </span>
  </h3>

  <article class="post-content">
    <h1>faceswap</h1>
    <h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Faceswapæ˜¯ä¸€ç§åˆ©ç”¨æ·±åº¦å­¦ä¹ æ‰‹æ®µæ¥äº¤æ¢å›¾ç‰‡å’Œè§†é¢‘ä¸­çš„é¢å­”çš„å·¥å…·ã€‚</p>
<p><a href="https://github.com/deepfakes/faceswap" target="_blank" rel="noopener">github åœ°å€</a></p>
<p><a href="https://github.com/deepfakes/faceswap/blob/master/USAGE.md" target="_blank" rel="noopener">github æ•™ç¨‹</a></p>
<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ol>
<li><p>cuda ç¯å¢ƒ (è¯¦æƒ…è§å¦ä¸€åšå®¢ -&gt; <a href="https://shuai93.github.io/2019/05/28/cuda/">cuda/cudnn å®‰è£…</a>)</p>
</li>
<li><p>tensorflow-gpu å‡†å¤‡</p>
<p> <a href="https://tensorflow.google.cn/install/source" target="_blank" rel="noopener">linux tensorflwoç‰ˆæœ¬å¯¹åº”</a></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install tensorflow_gpu==1.12.0</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="åŸºæœ¬æ­¥éª¤è¯¦è§£"><a href="#åŸºæœ¬æ­¥éª¤è¯¦è§£" class="headerlink" title="åŸºæœ¬æ­¥éª¤è¯¦è§£"></a>åŸºæœ¬æ­¥éª¤è¯¦è§£</h2><ol>
<li><p>å‡†å¤‡å·¥ä½œ æå–å›¾ç‰‡ã€è§†é¢‘ä¸­äººè„¸ä¿¡æ¯</p>
<p> è¿™é‡Œè¦æ³¨æ„çš„æ˜¯å¯èƒ½æå–åˆ°å…¶ä»–çš„ç¯å¢ƒå›¾ç‰‡éœ€è¦æ‰‹åŠ¨åˆ é™¤éƒ¨åˆ†æ•°æ®</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æå–è§†é¢‘ä¸­çš„äººè„¸æ•°æ®</span></span><br><span class="line">python faceswap.py extract -i ./faces/demo_2_2018_smw_drsp.mp4  -o ./faces/demo</span><br><span class="line"></span><br><span class="line">python faceswap.py extract -i ./faces/cutout.mp4 -o ./faces/lhy</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®­ç»ƒæ¨¡å‹</p>
<p> è®­ç»ƒæ•°æ®åªéœ€è¦ä¸Šä¸€æ­¥æå–åˆ°çš„äººè„¸æ•°æ®</p>
<p> ä¸€èˆ¬ç”¨cpuè®­ç»ƒéœ€è¦æ•°å‘¨, gpuè®­ç»ƒéœ€è¦ 12-48 å°æ—¶, å½“lossä¸‹é™åˆ°0.015ä¸€ä¸‹æ‰èƒ½æœ‰æ‰€æ•ˆæœ</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python faceswap.py train -A ./faces/demo/ -B ./faces/ll/ -m ./demo_ll_model</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨æ¨¡å‹ç”Ÿæˆæ¢è„¸å›¾</p>
<p> ffmpeg åˆ†è§£è§†é¢‘æˆå›¾ç‰‡æ•°æ®ç„¶åä½¿ç”¨æ¨¡å‹æ›¿æ¢å›¾ç‰‡ä¸­äººè„¸æ•°æ®</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨è®­ç»ƒæ•°æ®æ›¿æ¢</span></span><br><span class="line">python faceswap.py convert -i ./faces/demo -o ./faces/converted/ -m ./demo_ll_model</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨åŸå§‹è§†é¢‘æ•°æ®æ›¿æ¢ ï¼ˆå…ˆç”¨ffmpegå°†è§†é¢‘åˆ†è§£ä¸ºæ¯ä¸€å¸§å›¾ç‰‡æ•°æ®ï¼‰</span></span><br><span class="line">ffmpeg -i ./faces/demo_2_2018_smw_drsp.mp4 ./faces/demo_output/video-frame-%d.png</span><br><span class="line"></span><br><span class="line">python faceswap.py convert -i ./faces/demo_output/ -o ./faces/demo_converted/ -m ./demo_ll_model</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ†è§£è§†é¢‘éŸ³é¢‘å¹¶å°†åˆæˆåçš„è§†é¢‘ä¸éŸ³é¢‘åˆå¹¶</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ†è§£è§†é¢‘ éŸ³é¢‘</span></span><br><span class="line">ffmpeg -i demo_2_2018_smw_drsp.mp4 -vn -y -acodec copy 3.aac</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢è„¸åçš„å›¾ç‰‡åˆæˆè§†é¢‘</span></span><br><span class="line">ffmpeg -i ./faces/demo_converted/video-frame-%0d.png -c:v libx264 -vf <span class="string">"fps=25,format=yuv420p"</span> lz_demo.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆæˆéŸ³é¢‘ä¸è§†é¢‘</span></span><br><span class="line">ffmpeg -i 1.mp4 -i 1.aac -c:v copy -c:a aac -strict experimental 1_yzx.mp4</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨ tensorboard æŸ¥çœ‹ç½‘ç»œç»“æ„ä»¥åŠè®­ç»ƒè¿‡ç¨‹</p>
<p> è¿™é‡Œèƒ½å¤Ÿçœ‹åˆ°æ•´ä¸ªfaceswapçš„ç½‘ç»œç»“æ„ä»¥åŠè®­ç»ƒçš„æ”¶æ•›é€Ÿåº¦</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€logæ–‡ä»¶</span></span><br><span class="line">tensorboard --logdir ./demo_ll_model/</span><br><span class="line"></span><br><span class="line">TensorBoard 1.12.2 at http://yixue-pc:6006 (Press CTRL+C to quit)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµè§ˆå™¨æ‰“å¼€å°±å¯ä»¥è§‚çœ‹äº† è¿™é‡Œåªèƒ½çœ‹åˆ°åºåˆ—</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="å…¶ä»–å·¥å…·ç®€ä»‹"><a href="#å…¶ä»–å·¥å…·ç®€ä»‹" class="headerlink" title="å…¶ä»–å·¥å…·ç®€ä»‹"></a>å…¶ä»–å·¥å…·ç®€ä»‹</h2><h3 id="you-get-è§†é¢‘ä¸‹è½½å·¥å…·"><a href="#you-get-è§†é¢‘ä¸‹è½½å·¥å…·" class="headerlink" title="you-get è§†é¢‘ä¸‹è½½å·¥å…·"></a>you-get è§†é¢‘ä¸‹è½½å·¥å…·</h3><ol>
<li><p>å®‰è£…</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install you-get</span><br><span class="line"></span><br><span class="line">brew install youtube-dl</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨è¯¦è§£</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è§†é¢‘çš„ä¿¡æ¯ä»¥åŠå¯é€‰æ ¼å¼</span></span><br><span class="line">youtube-dl -F https://v.youku.com/v_show/id_XMzg0NjMzMjg2OA\=\=.html\?spm\=a2h0k.11417342.soresults.dtitle</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½ -Fè¿”å›çš„å…·ä½“æ ¼å¼è§†é¢‘</span></span><br><span class="line">youtube-dl -f 3  https://v.youku.com/v_show/id_XMzg0NjMzMjg2OA\=\=.html\?spm\=a2h0k.11417342.soresults.dtitle</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="ffmpeg-è§†é¢‘å¤„ç†å·¥å…·"><a href="#ffmpeg-è§†é¢‘å¤„ç†å·¥å…·" class="headerlink" title="ffmpeg è§†é¢‘å¤„ç†å·¥å…·"></a>ffmpeg è§†é¢‘å¤„ç†å·¥å…·</h3><ol>
<li><p>å®‰è£…</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mac å®‰è£…</span></span><br><span class="line">brew install ffmpeg</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŸºæœ¬ä½¿ç”¨</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># æå–è§†é¢‘çš„ä¸€éƒ¨åˆ†</span></span><br><span class="line">ffmpeg  -i ./Downloads/5cdbcf72e6de1.mp4 -vcodec copy -acodec copy -ss 00:08:10 -to 00:13:00 ./Downloads/cutout.mp4 -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†è§†é¢‘ MP4 è½¬åŒ–ä¸º GIF</span></span><br><span class="line">ffmpeg -i small.mp4 small.gif</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬åŒ–è§†é¢‘ä¸­çš„ä¸€éƒ¨åˆ†ä¸º GIF</span></span><br><span class="line">ffmpeg -t 3 -ss 00:00:02 -i small.webm small-clip.gif</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬åŒ–é«˜è´¨é‡ GIF</span></span><br><span class="line">é»˜è®¤è½¬åŒ–æ˜¯ä¸­ç­‰è´¨é‡æ¨¡å¼ï¼Œè‹¥è¦è½¬åŒ–å‡ºé«˜è´¨é‡çš„ gifï¼Œå¯ä»¥ä¿®æ”¹æ¯”ç‰¹ç‡</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å€é€Ÿæ’­æ”¾è§†é¢‘</span></span><br><span class="line">ffmpeg -i input.mov -filter:v <span class="string">"setpts=0.5*PTS"</span> output.mov</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¸§ç‡ 16fps:</span></span><br><span class="line">ffmpeg -i input.mov -r 16 -filter:v <span class="string">"setpts=0.125*PTS"</span> -an output.mov</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ…¢å€é€Ÿæ’­æ”¾è§†é¢‘</span></span><br><span class="line">ffmpeg -i input.mov -filter:v <span class="string">"setpts=2.0*PTS"</span> output.mov</span><br><span class="line"></span><br><span class="line"><span class="comment"># é™éŸ³è§†é¢‘ï¼ˆç§»é™¤è§†é¢‘ä¸­çš„éŸ³é¢‘ï¼‰ -an å°±æ˜¯ç¦æ­¢éŸ³é¢‘è¾“å‡º</span></span><br><span class="line">ffmpeg -i input.mov -an mute-output.mov</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† GIF è½¬åŒ–ä¸º MP4</span></span><br><span class="line">ffmpeg -f gif -i animation.gif animation.mp4</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¹Ÿå¯ä»¥å°† gif è½¬ä¸ºå…¶ä»–è§†é¢‘æ ¼å¼</span></span><br><span class="line">ffmpeg -f gif -i animation.gif animation.mpeg</span><br><span class="line"></span><br><span class="line">ffmpeg -f gif -i animation.gif animation.webm</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å– GIF çš„ç¬¬ä¸€å¸§å›¾ç‰‡</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨ ImageMagick å¯ä»¥æ–¹ä¾¿ç¬¬æå– gif å›¾ç‰‡çš„ç¬¬ N å¸§å›¾åƒã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®‰è£… ImageMagick</span></span><br><span class="line"></span><br><span class="line">brew install imagemagick</span><br><span class="line"><span class="comment">#æå–ç¬¬ä¸€å¸§</span></span><br><span class="line"></span><br><span class="line">convert <span class="string">'animation.gif[0]'</span> animation-first-frame.gif</span><br></pre></td></tr></table></figure>

</li>
</ol>

  </article>
</div>


    




</div>

<div class="footer-wrapper container">
  <footer class="footer clearfix">
    <div class="clearfix">
    <a href="https://shuai93.github.io" class="footer-logo">
      <i class="fa fa-github"></i>
    </a>
    <ul class="footer-social-link">
      <li>Â© 2019 shuai</li>
      <li><a href="https://shuai93.github.io">Home</a></li>
      
    </ul>
    <div class="footer-theme-info">
      Theme <a href="//github.com/sabrinaluo/hexo-theme-replica">Replica</a>
      by <a href="//github.com/sabrinaluo">Hiitea</a> â¤ Powered by Hexo
    </div>
    </div>
    
  </footer>
</div>




<script src="/js/main.js"></script>

</body>
</html>
